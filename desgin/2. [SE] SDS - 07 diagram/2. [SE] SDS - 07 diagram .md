3\. Class diagram

이번 장은 다양한 관점에서 바라본 Class diagram(CD)과 각각에 대한 설명을
기술한다.

> 각 CD는 시스템 구현 시 고려해야 할 설계 계층별 구성을 나타내며, 실제
> 코드 구조 및 데이터베이스 설계를 직관적으로 파악할 수 있도록
> 작성되었다.

본 문서의 Class diagram을 볼 때 고려해야 할 사항은 다음과 같다.

-   본 시스템의 CD는 웹 서버(백엔드) 와 클라이언트(프론트엔드) 간 데이터
    > 흐름을 고려하여 설계되었다.

-   웹 애플리케이션용 CD는 목적에 따라 기능(Function),
    > 상속(Inheritance), DB 접근(DB Access) 으로 구분된다.

-   각 기능 CD는 하나 이상의 Use Case(사용자 시나리오) 와 직접적으로
    > 연관되어 있으며,

-   회원가입, 로그인, 도서 등록, 거래 진행, 채팅, 후기 작성 등 실제
    > 사용자 행위를 기반으로 작성되었다.

각 다이어그램에 대한 간단한 설명은 다음과 같다.

-   DB Class Diagram : 데이터베이스의 테이블 구조를 객체 형태로 표현

-   상속 Diagram : 객체 간의 공통 속성과 상속 관계를 표현

-   DB 접근 Diagram : DAO 구조를 통한 데이터 접근 계층 설계

-   Utility and Static Class : 시스템 전역에서 사용되는 공통 유틸 기능

-   기능 Class Diagram : 주요 기능별 MVC 구조 설계

3.1 DB Class Diagram

> 해당 다이어그램은 데이터베이스(DB)의 관점에서 본 시스템의 구조를 Class
> Diagram 형태로 나타낸다.
>
> ER(Entity Relationship) Diagram을 기반으로 작성되었으며, 실제 테이블
> 간 관계와 데이터 흐름을 객체 단위로 표현하였다.
>
> 본 CD는 사용자(User), 도서(Book), 거래(Trade), 채팅(Message),
> 후기(Review)로 구성되어 있으며,
>
> 시스템의 핵심 데이터가 어떻게 저장되고 연동되는지를 보여준다.
>
> ![](2. [SE] SDS - 07 diagram /media/image1.png){width="4.051388888888889in"
> height="3.9243055555555557in"}
>
> \[그림 - \] DB Class Diagram

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| User** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 사이트 이용자 계정 정보    |                    |         |
|  Class | (회원가입, 로그인 정보     |                    |         |
| >      | 저장)                      |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **userId**               | > string           | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **password**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 비밀번호          |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **userid**               | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 사용                     |                    |         |
|        | 자를구분하기위한고유의변수 |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **userEmail**            | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 이메일            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **role**                 | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 역할(관리자 / 사용자)    |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **GetUserInfo()**        | > string           | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 정보 반환         |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| Book** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 등록된 중고 도서 정보      |                    |         |
|  Class | 테이블                     |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **bookId**               | > int              | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 도서 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **title**                | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 도서 제목                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **department**           | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 학과 / 카테고리          |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **price**                | > int              | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 판매 가격                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **condition**            | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 상태 (하 / 중 / 상 /     |                    |         |
|        | > 최상)                    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **sellerId**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 id                |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **GetBookInfo()**        | > string           | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 상세 정보 반환      |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **T  |                            |                    |         |
| rade** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 도서 거래 정보 관리 테이블 |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **tradeId**              | > int              | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **buyerId**              | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **sellerId**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **bookId**               | > int              | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 도서 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **tradeStatus**          | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 (판매 중 /     |                    |         |
|        | > 예약 중 / 판매완료)      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **paymentStatus**        | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 결제 상태 (입금 전 /     |                    |         |
|        | > 입금완료 / 송금완료)     |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **updateStatus**         | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **confirmPayment**       | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 결제 승인 처리           |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Mes |                            |                    |         |
| sage** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 1:1 실시간 채팅 메시지     |                    |         |
|  Class | 테이블                     |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **messageId**            | > int              | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 채팅 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **senderId**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 보낸 사람 아이디 (FK →   |                    |         |
|        | > User.userId)             |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **receiverId**           | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 받는 사람 아이디 (FK →   |                    |         |
|        | > User.userId)             |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **content**              | > int              | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 내용              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **timestamp**            | > date             | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 전송 시각                |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **SaveMessage()**        | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 저장              |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **Re |                            |                    |         |
| view** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 거래 완료 후 선택형 후기   |                    |         |
|  Class | 데이터 저장                |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **tradeId**              | > int              | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **reviewId**             | > int              | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 리뷰 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **sellerId**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **buyerId**              | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **positiveTag**          | > List\<string\>   | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 선택 가능한 긍정 항목    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **negativeTag**          | > List\<string\>   | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 선택 가능한 부정 항목    |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **GetReviewTags()**      | > List\<string\>   | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 결제 승인 처리           |                    |         |
+--------+----------------------------+--------------------+---------+

3.2 상속 Diagram

해당 다이어그램은 BookBuddy 시스템 내의 주요 객체 간 상속 구조를 나타낸
것이다.

> 시스템 내 역할(Role)별로 공통된 속성 및 동작을 공유하면서, 각 하위
> 클래스가 자신의 책임에 맞게 기능을 확장하는 객체지향(OOP) 기반 구조를
> 표현한다.

![](2. [SE] SDS - 07 diagram /media/image2.png){width="6.665972222222222in"
height="2.301388888888889in"}

\[그림 - \] 상속 Diagram

크게 두 계층의 상속 구조로 구분된다.

-   사용자 계층 (User Hierarchy)　:　일반 사용자(Member)와 관리자(Admin)

-   거래 계층 (Trade Hierarchy)　:　판매글 거래(SalePost)와 구매
    요청(PurchaseRequest)

이 두 계층은 각각의 공통 속성을 상위 클래스에 정의하고, 하위 클래스에서
개별적인 행동을 추가하여 확장성과 재사용성을 확보할 수 있다.

\- User 계층

+--------+----------------------------+--------------------+---------+
| > **A  |                            |                    |         |
| dmin** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 관리자 계정으로서 거래     |                    |         |
|  Class | 관리 및 송금 관련 기능을   |                    |         |
| >      | 수행한다.                  |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Att  | > **adminId**              | > string           | >       |
| ribute |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 관리자 식별용 아이디     |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | >                          | > List\<Trade\>    | >       |
| ations |  **ViewCompletedTrades()** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 완료 내역 조회      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > *                        | > void             | >       |
|        | *ConfirmPayment(tradeId)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 입금 확인         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **T                      | > void             | >       |
|        | ransferToSeller(tradeId)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 송금 완료         |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **Me |                            |                    |         |
| mber** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 일반 사용자를 의미하며,    |                    |         |
|  Class | 도서 등록 및 거래, 후기    |                    |         |
| >      | 작성 등의 일반 기능을      |                    |         |
|  Descr | 담당한다.                  |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Att  | > **myBookList**           | > List\<Book\>     | >       |
| ribute |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 사용자가 등록한 도서     |                    |         |
|        | > 목록                     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **myTradeList**          | > List\<Trade\>    | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 참여 중인 거래 목록      |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **RegisterBook()**       | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매글 등록              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ChatWithSeller()**     | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 채팅 요청                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **WriteReview()**        | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 후기 작성                |                    |         |
+--------+----------------------------+--------------------+---------+

\- Trade 계층

+--------+----------------------------+--------------------+---------+
| > **T  |                            |                    |         |
| rade** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 거래 관련 클래스의 공통    |                    |         |
|  Class | 구조를 정의하는 추상       |                    |         |
| >      | 클래스이다.                |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **tradeId**              | > int              | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **buyerId**              | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **sellerId**             | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 아이디            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **bookId**               | > int              | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 도서 고유 번호           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **tradeStatus**          | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 (판매 중 /     |                    |         |
|        | > 예약 중 / 판매완료)      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **paymentStatus**        | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 결제 상태 (입금 전 /     |                    |         |
|        | > 입금완료 / 송금완료)     |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **updateStatus**         | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **confirmPayment**       | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 결제 승인 처리           |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Sale |                            |                    |         |
| Post** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 판매자가 등록한 도서       |                    |         |
|  Class | 판매글 거래를 표현한다.    |                    |         |
| >      |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **postDate**             | > date             | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 게시글 등록일            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **bookDetails**          | > book             | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 대상 도서 정보      |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **UpdatePost(condition,  | > void             | >       |
| ations | > price)**                 |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 정보 수정           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeletePost()**         | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매글 삭제              |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Purch |                            |                    |         |
| aseReq |                            |                    |         |
| uest** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 구매자가 직접 거래를       |                    |         |
|  Class | 요청하는 경우를 표현한다.  |                    |         |
| >      |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **desiredBook**          | > string           | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 게시글 등록일            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **requestMessage**       | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 거래 대상 도서 정보      |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ApproveRequest()**     | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 승인 처리         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **CancelRequest()**      | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 구매 요청 취소           |                    |         |
+--------+----------------------------+--------------------+---------+

3.3 DB 접근 Diagram

해당 다이어그램은 DB와 직접 연결되는 데이터 접근 계층(DAO)의 구조를
나타낸다.\
각 DAO 클래스는 테이블 단위로 구성되어 있으며, 데이터의 CRUD(Create,
Read, Update, Delete)기능을 수행한다.\
UserDAO, BookDAO, TradeDAO, MessageDAO, ReviewDAO, AdminDAO등으로
구성되어 있으며\
서비스 로직과 DB 접근 로직을 분리함으로써 코드 재사용성과 유지보수성을
강화한다.

![](2. [SE] SDS - 07 diagram /media/image3.png){width="5.483333333333333in"
height="4.375in"}

\[그림 - \] DB 접근 Diagram

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Use |                            |                    |         |
| rDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 회원 정보 테이블(User)에   |                    |         |
|  Class | 접근하여 로그인, 회원가입  |                    |         |
| >      | 등의 데이터 처리를         |                    |         |
|  Descr | 담당하는 클래스            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertUser(User        | > void             | >       |
| ations | > user)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 새 사용자 등록           |                    |         |
|        | > (회원가입)               |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetUserById(String     | > User             | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > ID로 사용자 정보 조회    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **VerifyLogin(String id, | > boolean          | >       |
|        | > String pw)**             |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 아이디와 비밀번호 검증   |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateUser(User        | > void             | >       |
|        | > user)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 정보 수정         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeleteUser(String      | > void             | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 회원 탈퇴 처리           |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Boo |                            |                    |         |
| kDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 도서 테이블(Book)에        |                    |         |
|  Class | 접근하여 등록, 수정, 삭제  |                    |         |
| >      | 및 검색 기능을 수행하는    |                    |         |
|  Descr | 클래스                     |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertBook(Book        | > void             | >       |
| ations | > book)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 등록                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateBook(Book        | > void             | >       |
|        | > book)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 정보 수정           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeleteBook(int         | > void             | >       |
|        | > bookId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 삭제                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetBookById(int        | > Book             | >       |
|        | > bookId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 특정 도서 상세 조회      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetBooks()**           | > List\<Book\>     | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 전체 도서 목록 조회      |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Trad |                            |                    |         |
| eDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 거래 테이블(Trade)에       |                    |         |
|  Class | 접근하여 거래 시작, 상태   |                    |         |
| >      | 변경, 결제 및 완료 처리를  |                    |         |
|  Descr | 수행하는 클래스            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertTrade(Trade      | > void             | >       |
| ations | > trade)**                 |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 새 거래 생성 (거래 전    |                    |         |
|        | > 상태)                    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateTradeStatus(int  | > void             | >       |
|        | > tradeId, String          |                    |  public |
|        | > status)**                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
|        | > (전→중→완료)             |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > void             | >       |
|        |  **UpdatePaymentStatus(int |                    |  public |
|        | > tradeId, String          |                    |         |
|        | > paymentStatus)**         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 결제 상태 업데이트       |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetTradeById(int       | > Trade            | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상세 조회           |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| Messag |                            |                    |         |
| eDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 채팅 메시지                |                    |         |
|  Class | 테이블(Message)에 접근하여 |                    |         |
| >      | 1:1 대화 내용을 저장 및    |                    |         |
|  Descr | 조회하는 클래스            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertMessage(Message  | > void             | >       |
| ations | > msg)**                   |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 채팅 메시지 저장         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > *                        | > List\<Message\>  | >       |
|        | *GetMessagesByUsers(String |                    |  public |
|        | > senderId, String         |                    |         |
|        | > receiverId)**            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 두 사용자 간의 대화      |                    |         |
|        | > 불러오기                 |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Revie |                            |                    |         |
| wDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 후기 테이블(Review)에      |                    |         |
|  Class | 접근하여 선택형            |                    |         |
| >      | 후기(긍정/부정 태그)를     |                    |         |
|  Descr | 저장하고 불러오는 클래스   |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertReview(Review    | > void             | >       |
| ations | > review)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 완료 후 후기 저장   |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > *                        | > List\<Review\>   | >       |
|        | *GetReviewsBySeller(String |                    |  public |
|        | > sellerId)**              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 후기 목록 조회    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetTagList(String      | >                  | >       |
|        | > type)**                  |  List\<ReviewTag\> |  public |
+--------+----------------------------+--------------------+---------+
|        | > 긍정/부정 후기 태그 목록 |                    |         |
|        | > 조회                     |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Admi |                            |                    |         |
| nDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 관리자 전용 기능(입금      |                    |         |
|  Class | 확인, 판매자 송금 등)에    |                    |         |
| >      | 필요한 거래 데이터를       |                    |         |
|  Descr | 조회·갱신하는 클래스       |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **GetCompletedTrades()** | > List\<Trade\>    | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 완료 상태의 목록    |                    |         |
|        | > 조회                     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ConfirmPayment(int     | > void             | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 입금 확인 처리    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **TransferToSeller(int   | > void             | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 송금 완료 처리    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > void             | >       |
|        |  **UpdatePaymentStatus(int |                    |  public |
|        | > tradeId, String          |                    |         |
|        | > status)**                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 결제 상태 갱신           |                    |         |
+--------+----------------------------+--------------------+---------+

3.4 Util and Static Classes

시스템 전반에서 공통으로 사용되는 유틸리티 및 정적(Static) 클래스를
설명한다.\
이들은 특정 기능에 종속되지 않고 전역적으로 호출되며, 입력
검증(InputValidator), 날짜 포맷 변환(DateFormatter), 세션
관리(SessionManager), 채팅 통신(ChatHandler), 파일 업로드(FileUploader)
등과 같은 기능을 수행한다.

![](2. [SE] SDS - 07 diagram /media/image4.png){width="5.097916666666666in"
height="2.620833333333333in"}

\[그림 - \] Util and Static Classes

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Inpu |                            |                    |         |
| tValid |                            |                    |         |
| ator** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 회원가입 및 도서 등록 시   |                    |         |
|  Class | 입력값 형식(아이디,        |                    |         |
| >      | 비밀번호, 전화번호 등)을   |                    |         |
|  Descr | 검증하는 유틸 클래스       |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ValidateUserId(String  | > boolean          | >       |
| ations | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 아이디 형식 검증         |                    |         |
|        | > (영문+숫자, 4\~20자)     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > boolean          | >       |
|        |  **ValidatePassword(String |                    |  public |
|        | > password)**              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 비밀번호 형식 검증       |                    |         |
|        | > (8\~20자, 특수문자 포함  |                    |         |
|        | > 가능)                    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ValidateEmail(String   | > boolean          | >       |
|        | > userEmail)**             |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 이메일 검증              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > boolean          | >       |
|        | **ValidateTextField(String |                    |  public |
|        | > text)**                  |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 입력 필드의 공백/빈값    |                    |         |
|        | > 여부 확인                |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Dat |                            |                    |         |
| eForma |                            |                    |         |
| tter** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 도서 등록일, 거래 완료일,  |                    |         |
|  Class | 후기 작성일 등을           |                    |         |
| >      |                            |                    |         |
|  Descr | 사람이 읽기 쉬운 날짜      |                    |         |
| iption | 문자열 형식(yyyy-MM-dd     |                    |         |
|        | HH:mm)으로 변환하는 유틸   |                    |         |
|        | 클래스                     |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **Format(Date date)**    | > string           | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 날짜 객체를 문자열로     |                    |         |
|        | > 변환                     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetToday()**           | > string           | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 현재 날짜를 문자열로     |                    |         |
|        | > 반환                     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **PadZero(int value)**   | > string           | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 한 자리 숫자 앞에 0을    |                    |         |
|        | > 붙여주는 내부 헬퍼 함수  |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Sess |                            |                    |         |
| ionMan |                            |                    |         |
| ager** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 사용자 로그인 세션을       |                    |         |
|  Class | 관리하는 클래스.           |                    |         |
| >      |                            |                    |         |
|  Descr | 브라우저 종료 또는         |                    |         |
| iption | 로그아웃 시 세션이         |                    |         |
|        | 만료되며, 로그인 여부를    |                    |         |
|        | 빠르게 확인하기 위한 공통  |                    |         |
|        | 관리용 클래스.             |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **activeSessions**       | > Map\<String,     | >       |
| ibutes |                            | > String\>         | private |
+--------+----------------------------+--------------------+---------+
|        | > 현재 로그인된 사용자     |                    |         |
|        | > 세션 목록 (userId →      |                    |         |
|        | > sessionToken)            |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **CreateSession(String   | > void             | >       |
| ations | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 로그인 시 세션 생성      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DestroySession(String  | > void             | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 로그아웃 시 세션 삭제    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **IsSessionActive(String | > boolean          | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 세션 유효성 확인         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GenerateToken(String   | > string           | >       |
|        | > userId)**                |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 내부적으로 고유 세션     |                    |         |
|        | > 토큰 생성                |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **C  |                            |                    |         |
| hatHan |                            |                    |         |
| dler** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | WebSocket 기반의 1:1 채팅  |                    |         |
|  Class | 기능을 관리하는 정적       |                    |         |
| >      | 클래스.                    |                    |         |
|  Descr |                            |                    |         |
| iption | 채팅 서버 연결, 메시지     |                    |         |
|        | 송수신, 연결 종료 등을     |                    |         |
|        | 처리.                      |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **socketConnection**     | > object           | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > WebSocket 연결 객체      |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **OpenConnection(String  | > void             | >       |
| ations | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > WebSocket 연결 생성      |                    |         |
|        | > (사용자 로그인 시 자동   |                    |         |
|        | > 연결)                    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **CloseConnection()**    | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > WebSocket 연결 종료      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > void             | >       |
|        |  **SendMessage(ChatMessage |                    |  public |
|        | > msg)**                   |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 전송              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ReceiveMessage()**     | > ChatMessage      | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 수신 메시지 반환         |                    |         |
+--------+----------------------------+--------------------+---------+

3.5 기능 Class Diagram

해당 다이어그램은 실제 서비스 기능을 구현하기 위한 기능별 MVC(Model View
Controller) 구조를 표현한다.

주요 기능으로는 회원가입 및 로그인, 도서 등록/수정, 거래 상태 관리, 1:1
채팅, 후기 작성, 관리자, Utility 등이 포함된다.

각 기능은 Controller, Logic, DAO 계층으로 분리되어 있다.

![](2. [SE] SDS - 07 diagram /media/image5.png){width="5.0152777777777775in"
height="5.052777777777778in"}

\[그림 - \] 기능 Class Diagram

-   회원가입 / 로그인

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| SignUp |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 회원가입 요청을 처리하는   |                    |         |
|  Class | 컨트롤러                   |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **HandleSignUp(User      | > void             | >       |
| ations | > user)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 입력받은 회원정보를 DB에 |                    |         |
|        | > 전달                     |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ValidateInput(User     | > boolean          | >       |
|        | > user)**                  |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 입력 유효성 검사         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **SaveUser(User user)**  | > void             | >       |
|        |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 회원 데이터 저장         |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Login |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 로그인 요청을 처리하는     |                    |         |
|  Class | 컨트롤러                   |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **HandleLogin(String id, | > boolean          | >       |
| ations | > String pw)**             |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 로그인 요청 처리         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **VerifyCredentials(User | > boolean          | >       |
|        | > user)**                  |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 아이디, 비밀번호 검증    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **CreateSession(String   | > void             | >       |
|        | > userId)**                |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 로그인 성공 시 세션 생성 |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Use |                            |                    |         |
| rViewM |                            |                    |         |
| odel** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 현재 로그인된 사용자 정보  |                    |         |
|  Class | 유지                       |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Attr | > **currentUser**          | > User             | >       |
| ibutes |                            |                    | private |
+--------+----------------------------+--------------------+---------+
|        | > 현재 로그인한 사용자     |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **GetUserInfo()**        | > User             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 정보 반환         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **Logout()**             | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 세션 종료                |                    |         |
+--------+----------------------------+--------------------+---------+

-   도서등록 / 수정 기능

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Book |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 도서 등록, 수정, 삭제 기능 |                    |         |
|  Class | 담당                       |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **RegisterBook(Book      | > void             | >       |
| ations | > book)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 새 도서 등록             |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **EditBook(int id,       | > void             | >       |
|        | > String condition, int    |                    |  public |
|        | > price)**                 |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 도서 수정                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeleteBook(int id)**   | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 삭제                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ViewBookList()**       | > List\<Book\>     | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 등록된 도서 목록 반환    |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *BookL |                            |                    |         |
| ogic** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 도서 관련 비즈니스 로직    |                    |         |
|  Class | 수행 (DAO와 연결)          |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ValidateBookData(Book  | > boolean          | >       |
| ations | > book)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 등록 데이터 검증         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **SaveBook(Book book)**  | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > BookDAO로 저장 요청      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateBook(Book        | > void             | >       |
|        | > book)**                  |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > BookDAO를 통해 수정      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeleteBook(int id)**   | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > BookDAO로 삭제 요청      |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
|  **Boo |                            |                    |         |
| kDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | DB 접근을 통한 도서 CRUD   |                    |         |
|  Class | 담당                       |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertBook(Book)**     | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 등록                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateBook(Book)**     | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 수정                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DeleteBook(int)**      | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 삭제                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetBookList()**        | > List\<Book\>     | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 전체 목록 조회           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetBookById(int)**     | > Book             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 도서 상세 조회           |                    |         |
+--------+----------------------------+--------------------+---------+

-   채팅

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Chat |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 채팅 UI와 서버 간의 메시지 |                    |         |
|  Class | 송수신 관리                |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **StartChat(String       | > void             | >       |
| ations | > sellerId, String         |                    |  public |
|        | > buyerId)**               |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 채팅방 생성              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > void             | >       |
|        |  **SendMessage(ChatMessage |                    |  public |
|        | > msg)**                   |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 전송              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ReceiveMessage()**     | > ChatMessage      | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 수신              |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **C  |                            |                    |         |
| hatHan |                            |                    |         |
| dler** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | WebSocket 연결 관리        |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **OpenConnection()**     | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 서버 연결                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **CloseConnection()**    | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 연결 종료                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **Send(ChatMessage)**    | > void             | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 전송              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **Listen()**             | > ChatMessage      | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 서버로부터 수신          |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| Messag |                            |                    |         |
| eDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 채팅 내역 저장 / 조회      |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | >                          | > void             | >       |
| ations | **InsertMessage(Message)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 메시지 저장              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **                       | > List\<Message\>  | >       |
|        | GetMessagesByUsers(String, |                    |  public |
|        | > String)**                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 사용자 간 대화 조회      |                    |         |
+--------+----------------------------+--------------------+---------+

\- 거래 관리

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Trade |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 구매자와 판매자 간 거래    |                    |         |
|  Class | 상태 제어                  |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **StartTrade(int bookId, | > void             | >       |
| ations | > String buyerId)**        |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 시작                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateTradeStatus(int  | > void             | >       |
|        | > tradeId, String          |                    |  public |
|        | > status)**                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ConfirmPayment(int     | > void             | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 입금 확인 처리           |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| TradeL |                            |                    |         |
| ogic** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 거래 상태 전환에 대한      |                    |         |
|  Class | 비즈니스 로직 수행         |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ValidateBuyer(String   | > boolean          | >       |
| ations | > buyerId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 가능 여부 확인      |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ChangeStatus(int       | > void             | >       |
|        | > tradeId, String          |                    |  public |
|        | > status)**                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **ProcessPayment(int     | > void             | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 결제 검증 및 업데이트    |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Trad |                            |                    |         |
| eDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | DB 접근용 거래 정보 관리   |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertTrade(Trade)**   | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 생성                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **UpdateTradeStatus(int, | > void             | >       |
|        | > String)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 상태 변경           |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetTradeById(int)**    | > Trade            | >       |
|        |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 거래 조회                |                    |         |
+--------+----------------------------+--------------------+---------+

-   후기 작성

+--------+----------------------------+--------------------+---------+
| > **   |                            |                    |         |
| Review |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 구매자가 거래 완료 후      |                    |         |
|  Class | 선택형 후기를 남김         |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ShowReviewOptions()**  | >                  | >       |
| ations |                            |  List\<ReviewTag\> |  public |
+--------+----------------------------+--------------------+---------+
|        | > 선택 가능한 항목 표시    |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **SubmitReview(int       | > void             | >       |
|        | > tradeId, List\<String\>  |                    |  public |
|        | > pos, List\<String\>      |                    |         |
|        | > neg)**                   |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 후기 등록                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > List\<Review\>   | >       |
|        |  **GetSellerReviews(String |                    |  public |
|        | > sellerId)**              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 후기 목록 반환    |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Revie |                            |                    |         |
| wDAO** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 후기 데이터 DB 저장 및     |                    |         |
|  Class | 조회                       |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **InsertReview(Review)** | > void             | >       |
| ations |                            |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 후기 등록                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **Ge                     | > List\<Review\>   | >       |
|        | tReviewsBySeller(String)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 후기 조회         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **GetTagList(String      | >                  | >       |
|        | > type)**                  |  List\<ReviewTag\> |  public |
+--------+----------------------------+--------------------+---------+
|        | > 선택 가능한 태그 목록    |                    |         |
|        | > 반환                     |                    |         |
+--------+----------------------------+--------------------+---------+

-   관리자

+--------+----------------------------+--------------------+---------+
| > *    |                            |                    |         |
| *Admin |                            |                    |         |
| Contro |                            |                    |         |
| ller** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 거래 완료 후 판매자에게    |                    |         |
|  Class | 송금 처리하는 관리자 기능  |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **ConfirmPayment(int     | > void             | >       |
| ations | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 구매자 입금 확인         |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **TransferToSeller(int   | > void             | >       |
|        | > tradeId)**               |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 판매자 송금 완료         |                    |         |
+--------+----------------------------+--------------------+---------+

-   Utility

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Inpu |                            |                    |         |
| tValid |                            |                    |         |
| ator** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 입력값 검증 클래스         |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | >                          | > boolean          | >       |
| ations | **ValidateUserId(String)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 아이디 검증              |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **                       | > boolean          | >       |
|        | ValidatePassword(String)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 비밀번호 검증            |                    |         |
+--------+----------------------------+--------------------+---------+
|        | >                          | > boolean          | >       |
|        |  **ValidateEmail(String)** |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 이메일 검증              |                    |         |
+--------+----------------------------+--------------------+---------+

+--------+----------------------------+--------------------+---------+
| >      |                            |                    |         |
| **Sess |                            |                    |         |
| ionMan |                            |                    |         |
| ager** |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| >      | 로그인 세션 관리 클래스    |                    |         |
|  Class |                            |                    |         |
| >      |                            |                    |         |
|  Descr |                            |                    |         |
| iption |                            |                    |         |
+--------+----------------------------+--------------------+---------+
| > 구분 | > Name                     | > Type             | > Vis   |
|        |                            |                    | ibility |
+--------+----------------------------+--------------------+---------+
|        | > Description              |                    |         |
+--------+----------------------------+--------------------+---------+
| > Oper | > **CreateSession(String   | > void             | >       |
| ations | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 세션 생성                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **DestroySession(String  | > void             | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 세션 종료                |                    |         |
+--------+----------------------------+--------------------+---------+
|        | > **IsSessionActive(String | > boolean          | >       |
|        | > userId)**                |                    |  public |
+--------+----------------------------+--------------------+---------+
|        | > 세션 유효성 검사         |                    |         |
+--------+----------------------------+--------------------+---------+

3.6 Transaction Diagram

본 절에서는 BookBuddy 시스템에서의 도서 거래 절차를 시간 순서에 따라
표현한 트랜잭션 다이어그램을 제시한다.

> 해당 다이어그램은 구매자(Buyer), 판매자(Seller), 관리자(Admin),
> 데이터베이스(DB) 간의 상호작용을 중심으로 거래 생성부터 송금
> 완료까지의 전체 흐름을 나타낸다.
>
> 거래 절차는 다음과 같은 6단계 절차로 구성된다.
>
> 각 단계는 거래 상태(Trade.status) 및 결제 상태(paymentStatus)의 변화를
> 수반하며, 모든 단계는 데이터베이스에 실시간으로 반영된다.
>
> ① 판매자, 도서 판매 글 등록, 거래 미생성 (null)
>
> ② 구매자 ↔ 판매자, 채팅을 통한 거래 협의, 거래 전 (Pre-Trade)
>
> ③ 구매자 → 관리자, 구매자가 입금 요청, 거래 중 (In-Progress,
> paymentStatus=\"입금 완료\")
>
> ④ 판매자 ↔ 구매자, 대면 직거래 진행, 거래 중 유지
>
> ⑤ 구매자, 거래 완료 버튼 클릭 → 상태 전환, 거래 완료 (Completed)
>
> ⑥ 관리자, 거래 상태 검증 후 판매자에게 송금, 송금 완료 (Transferred)
>
> 구성요소와 구성 요소별 역할은 다음과 같다.

-   Buyer(구매자)：거래 주체판매자에게 거래를 제안하고, 입금 및 거래
    > 완료 처리 수행

-   Seller(판매자) :　거래 대상, 도서 판매 글 작성 및 직거래 수행

-   Admin(관리자) : 검증 및 송금 담당, 거래 완료 후 판매자에게 금액
    > 송금, 결제 상태 변경

-   TradeSystem(DB) : 데이터 저장소, 거래 생성, 상태 및 결제 상태 저장
    > 및 변경

> ![](2. [SE] SDS - 07 diagram /media/image6.png){width="4.8180555555555555in"
> height="5.411111111111111in"}
>
> \[그림 - \]
